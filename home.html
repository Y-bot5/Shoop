<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="/Shoop/home/styles.css">
    <link rel="stylesheet" href="/Shoop/styles.css">

    <script src="/Shoop/registerServiceWorker.js" defer></script>

    <link rel="icon" href="/Shoop/icon-32.png" sizes="32x32">
            <link rel="icon" href="/Shoop/icon-192.png" sizes="192x192">
            <link rel="icon" href="/Shoop/icon-512.png" sizes="512x512">

    <link rel="manifest" href="/Shoop/manifest.json">

    <script type="module" src="/Shoop/general.js"></script>

    <title>Shoop</title>
  </head>
  <body>
    <header class="topbar" style="display:none">
  <button id="menuBtn" aria-label="Menu">☰</button>

  <a id="profileLink">
    <img
      id="avatar"
      src="/Shoop/noProfile.webp"
      alt="Profile"
    >
  </a>
</header>

<div class="other" style="display:none"></div>
                                                                                                  <h1 id="status">Loading…</h1>

                                                                                                                      <script type="module">
                                                                                                                                          import { auth, onAuthStateChanged } from "/Shoop/firebase.js";

                                                                                                                                                              const status = document.getElementById("status");
                                                                                                                                                                                  const profileLink = document.getElementById("profileLink");
                                                                                                                                                                                  const profileRoot = document.getElementById("other")

                                                                                                                                                                                                      onAuthStateChanged(auth, user => {
                                                                                                                                                                                                                                if (user) {
                                                                                                                                                                                                                                                                status.textContent = `Hello, ${user.displayName || user.email}`;
                                                                                                                                                                                                                                                                                                    profileLink.href = `/Shoop/profile?u=${encodeURIComponent(user.displayName)}`;
                                                                                                                                                                                                                                                                                                    profileRoot.style.display = "block";
                                                                                                                                                                                                                                                                                                                              } else {
                                                                                                                                                                                                                                                                                                                                                              status.textContent = "Not logged in";
                                                                                                                                                                                                                                                                                                                                                                                                  profileLink.href = "/Shoop/login/";
                                                                                                                                                                                                                                                                                                                                                                                                  profileRoot.style.display = "block";
                                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                                                                });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </script>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  </body>
</html>