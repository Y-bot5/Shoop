<!DOCTYPE html>
<html lang="en" data-theme="dark light">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="styles.css">

    <link rel="icon" href="favicon.ico" sizes="any">
    <link rel="icon" type="image/png" sizes="128x128" href="icon-128.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icon-32.png">
    <link rel="icon" type="image/png" sizes="48x48" href="icon-48.png">
    <link rel="icon" type="image/png" sizes="96x96" href="icon-96.png">

    <link rel="manifest" href="/shoop/manifest.json">

    <script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/Shoop/sw.js')
      .then(() => console.log("Service Worker Registered for Shoop"));
  }
    </script>

    <title>Shoop</title>
  </head>
  <body>
    <button id="menu">â‰¡</button>
  </body>
  <a id="profileLink" href="/Shoop/login.html">
  <img src="noProfile.webp" alt="Profile or login">
</a>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyD6bBqUlQe32d7dZRmJane3gAsttTCZyPs",
  authDomain: "shoop-hu4f.firebaseapp.com",
  projectId: "shoop-hu4f",
  storageBucket: "shoop-hu4f.firebasestorage.app",
  messagingSenderId: "291613688377",
  appId: "1:291613688377:web:6beb609208a1e22da403e8"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const profileLink = document.getElementById("profileLink");

onAuthStateChanged(auth, user => {
  if (!profileLink) return;

  if (user) {
    // ğŸ” Logged in â†’ go to profile page
    const profileName =
      user.displayName ||
      user.email.split("@")[0];

    profileLink.href =
  `/Shoop/profile/index.html?u=${encodeURIComponent(profileName)}`;
};
else {
    // ğŸšª Logged out â†’ go to login
    profileLink.href = "/Shoop/login.html";
  };
})
</script>
</html>
